<!DOCTYPE html>
<html lang="kr">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DTS</title>
</head>
<body>
    <script>
        function getCookie(cName){
            cName = cName + '=';
            var cookieData = document.cookie;
            var start = cookieData.indexOf(cName);
            var cValue = '';
            if (start != -1){
                start += cName.length;
                var end = cookieData.indexOf(';', start);
                if (end == -1) end = cookieData.length;
                cValue = cookieData.substring(start, end);
            }
            return unescape(cValue);
        }
        function saveCookie(){
            var date = new Date();
            date.setDate(date.getDate() + 7);
            var willCookie = "";
            if(getCookie("DTSvalue") != ""){
                willCookie += "DTSvalue=" + getCookie("DTSvalue") + "$" + document.getElementById("DTSnumber").value + ":" + document.getElementById("DTSdelivery").value + ";";
            } else{
                willCookie += "DTSvalue=" + document.getElementById("DTSnumber").value + ":" + document.getElementById("DTSdelivery").value + ";";
            }
            willCookie += "expires=" + date.toUTCString();
            document.cookie = willCookie;
            console.log(willCookie);

            // willCookie = "";
            // willCookie += "DTSvalue" + getCookie("DTSindex") + "=" + document.getElementById('DTSvalue').value + ";";
            // willCookie += "expires=" + date.toUTCString();
            // document.cookie = willCookie;
            // console.log(willCookie);
        }
        function delCookie(){
            var date = new Date();
            date.setDate(date.getDate() + 7);
            var willCookie = "";
            willCookie += "DTSvalue=" + ";";
            willCookie += "expires=" + date.toUTCString();
            document.cookie = willCookie;
            console.log(willCookie);
        }
    </script>
    <div id="element">
    </div>
    <a href="https://tracker.delivery/#/:carrier_id/:track_id" target="_blank">배송조회</a>
    <a>></a><a id="consoles">여기에 나타납니다.</a><a><</a><br>
    <script>
        document.getElementById("consoles").innerText = getCookie("DTSvalue");
        if(getCookie("DTSvalue").includes("$") == true){
            var cookies = getCookie("DTSvalue").split("$")
        } else{
            var cookies = getCookie("DTSvalue")
        }
        console.log(getCookie("DTSvalue"))
        console.log(cookies)
        for(var i=0; i<cookies.length; i++){
            console.log(i)
            var temp = cookies[i].split(":")
            console.log(temp)
            document.getElementById("element").innerHTML += '<a href="https://tracker.delivery/#/' + temp[1] + '/' + temp[0] + '" target="_blank">' + temp[0] + '</a><br>'
        }
    </script>
    <input id="DTSnumber" type="number" inputmode="numeric" placeholder="송장번호">
    <br>
    <input id="DTSdelivery" type="text" placeholder="배송회사 코드">
    <br>
    <input type="button" onclick="saveCookie()" value="등록하기">
    <input type="button" onclick="delCookie()" value="모두 지우기">
</body>
</html>
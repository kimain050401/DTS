<!DOCTYPE html>
<html lang="kr">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DTS</title>
    <style>
        html, body{
            text-align: center;
        }
    </style>
</head>
<body>
    <script>
        function getCookie(cName){
            cName = cName + '=';
            var cookieData = document.cookie;
            var start = cookieData.indexOf(cName);
            var cValue = '';
            if (start != -1){
                start += cName.length;
                var end = cookieData.indexOf(';', start);
                if (end == -1) end = cookieData.length;
                cValue = cookieData.substring(start, end);
            }
            return unescape(cValue);
        }
        function saveCookie(){
            var date = new Date();
            date.setDate(date.getDate() + 7);
            var willCookie = "";
            if(getCookie("DTSvalue") != ""){
                willCookie += "DTSvalue=" + getCookie("DTSvalue") + "$" + document.getElementById("DTSnumber").value + ":" + document.getElementById("DTSdelivery").value + ";";
            } else{
                willCookie += "DTSvalue=" + document.getElementById("DTSnumber").value + ":" + document.getElementById("DTSdelivery").value + ";";
            }
            willCookie += "expires=" + date.toUTCString();
            document.cookie = willCookie;
            console.log(willCookie);

            // willCookie = "";
            // willCookie += "DTSvalue" + getCookie("DTSindex") + "=" + document.getElementById('DTSvalue').value + ";";
            // willCookie += "expires=" + date.toUTCString();
            // document.cookie = willCookie;
            // console.log(willCookie);
        }
        function delCookie(){
            var date = new Date();
            date.setDate(date.getDate() + 7);
            var willCookie = "";
            willCookie += "DTSvalue=" + ";";
            willCookie += "expires=" + date.toUTCString();
            document.cookie = willCookie;
            console.log(willCookie);
        }
    </script>
    <div id="element">
    </div>
    <a>쿠키 : </a><a id="consoles"></a><br>
    <script>
        document.getElementById("consoles").innerText = getCookie("DTSvalue");
        if(getCookie("DTSvalue").includes("$") == true){
            var cookies = getCookie("DTSvalue").split("$")
            console.log(getCookie("DTSvalue"))
            console.log(cookies)
            for(var i=0; i<cookies.length; i++){
                console.log(i)
                var temp = cookies[i].split(":")
                console.log(temp)
                fetch("https://apis.tracker.delivery/carriers/" + temp[1] + "/tracks/" + temp[0]).then((response) =>
                    console.log(response)
                    // document.getElementById("element").innerHTML += '<a>' + temp[0] + ' - </a><a>' + response +' - </a><a href="https://tracker.delivery/#/' + temp[1] + '/' + temp[0] + '" target="_blank">자세히보기</a><br>'
                );
            }
        } else{
            var cookies = getCookie("DTSvalue")
            console.log(getCookie("DTSvalue"))
            console.log(cookies)
            var temp = cookies.split(":")
            console.log(temp)
        fetch("https://apis.tracker.delivery/carriers/" + temp[1] + "/tracks/" + temp[0]).then((response) => response.json()).then(response=>{
            console.log(response.state.text)
        })
                // document.getElementById("element").innerHTML += '<a>' + temp[0] + ' - </a><a>' + response +' - </a><a href="https://tracker.delivery/#/' + temp[1] + '/' + temp[0] + '" target="_blank">자세히보기</a><br>'
        }
    </script>
    <input id="DTSnumber" type="number" inputmode="numeric" placeholder="송장번호">
    <br>
    <!-- <input id="DTSdelivery" type="text" placeholder="배송회사 코드"> -->
    <select id="DTSdelivery">
        <option value="de.dhl">DHL</option>
        <option value="jp.sagawa">Sagawa</option>
        <option value="jp.yamato">Kuroneko Yamato</option>
        <option value="jp.yuubin">Japan Post</option>
        <option value="kr.chunilps">천일택배</option>
        <option value="kr.cjlogistics">CJ대한통운</option>
        <option value="kr.cupost">CU 편의점택배</option>
        <option value="kr.cvsnet">GS Postbox 택배</option>
        <option value="kr.cway">CWAY (Woori Express)</option>
        <option value="kr.daesin">대신택배</option>
        <option value="kr.epost">우체국 택배</option>
        <option value="kr.hanips">한의사랑택배</option>
        <option value="kr.hanjin">한진택배</option>
        <option value="kr.hdexp">합동택배</option>
        <option value="kr.homepick">홈픽</option>
        <option value="kr.honamlogis">한서호남택배</option>
        <option value="kr.ilyanglogis">일양로지스</option>
        <option value="kr.kdexp">경동택배</option>
        <option value="kr.kunyoung">건영택배</option>
        <option value="kr.logen">로젠택배</option>
        <option value="kr.lotte">롯데택배</option>
        <option value="kr.slx">SLX</option>
        <option value="kr.swgexp">성원글로벌카고</option>
        <option value="nl.tnt">TNT</option>
        <option value="un.upu.ems">EMS</option>
        <option value="us.fedex">Fedex</option>
        <option value="us.ups">UPS</option>
        <option value="us.usps">USPS</option>
    </select>
    <br>
    <input type="button" onclick="saveCookie()" value="등록하기">
    <input type="button" onclick="delCookie()" value="모두 지우기">
</body>
</html>